# Container Monitoring App

**Container Monitoring App** ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Docker, –∫–æ—Ç–æ—Ä–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å RabbitMQ –∏ PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –û–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å—Ç–µ–∫

- **Go** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –±–µ–∫–µ–Ω–¥–∞.
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **RabbitMQ** ‚Äî –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö).
- **PostgreSQL** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- **Gorilla Mux** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.

## üìÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

### backend/
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ë–î (—Å–µ—Ä–≤–∏—Å database)
- HTTP-router –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É (—Å–µ—Ä–≤–∏—Å frontend)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è consumer'–∞ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π RabbitMQ.
- –Ø–∑—ã–∫ Go, Gorilla-mux –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ amqp –¥–ª—è RabbitMQ.

### frontend/
- –û—Ç–ø—Ä–∞–≤–∫–∞ GET-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å backend —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ React, —è–∑—ã–∫ TypeScript, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã AntDesign.

### database/
- –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Postgres) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç init.sql –∏ Dockerfile –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î.

### pinger/
- –ü–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –≤ RabbitMQ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è producer).
- –Ø–∑—ã–∫ Go, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ping, amqp –¥–ª—è rabbitMQ.

### docker-compose.yml
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Optoed/container-monitoring-app.git
cd container-monitoring-app
```

### 2. –ü–æ–¥–Ω—è—Ç–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker-compose up --build
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

- `DB_HOST` ‚Äî —Ö–æ—Å—Ç PostgreSQL (–æ–±—ã—á–Ω–æ `db`).
- `DB_PORT` ‚Äî –ø–æ—Ä—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5432`).
- `DB_USER` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
- `DB_PASSWORD` ‚Äî –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
- `DB_NAME` ‚Äî –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- `RABBITMQ_URL` ‚Äî URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `amqp://rabbitmq:5672`).
- `FRONTEND_URL` ‚Äî URL –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

–í –Ω–∞—Ö–æ–¥—è—â–µ–º—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ñ–∞–π–ª–µ docker-compose.yml –æ–Ω–∏ —É–∂–µ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã, –Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
docker compose up --build
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
docker compose down
```

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –∫—ç—à–æ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥–∏ **--no-cache** –∏ **--volumes**, –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∏ —Ç–æ–º–æ–≤.

## üßë‚Äçüíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
–î–∞–ª–µ–µ –±—É–¥—É—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

### –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö:
#### –°–ø–æ—Å–æ–± ‚Ññ1: –≤ Docker –∑–∞–ø—Ä–æ—Å –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ frontend –∫ —Å–µ—Ä–≤–∏—Å—É
–û—Ç–ø—Ä–∞–≤–∏–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—Ä–æ—Å –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ frontend –≤ –±–µ–∫–µ–Ω–¥:
```bash
docker exec -it <frontend-container-name> curl http://backend:8080/containers
```
–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å frontend-container-name, –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
docker ps
```

#### –°–ø–æ—Å–æ–± ‚Ññ2: –õ–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1) –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º:
```bash
cd ./frontend/docker-monitoring-frontend
```

2) –ó–∞–ø—É—Å–∫–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ yarn —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```bash
yarn start run
```
3) –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:3000 –∏ –Ω–∞–±–ª—é–¥–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (JSON):
```json
[
    {
        "id": 2,
        "ip": "192.168.224.3",
        "status": "alive",
        "last_ping_time": "2025-02-09T13:44:26.025867Z",
        "ping_duration": 82204
    },
    {
        "id": 5,
        "ip": "192.168.224.4",
        "status": "alive",
        "last_ping_time": "2025-02-09T13:44:26.025999Z",
        "ping_duration": 151740
    },
    {
        "id": 6,
        "ip": "192.16.0.2",
        "status": "down",
        "last_ping_time": "2025-02-09T13:44:28.034927Z",
        "ping_duration": 0
    }
]
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

![–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã](assets/frontend-img.jpg)